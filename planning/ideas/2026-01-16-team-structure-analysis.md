# 团队结构与人力配置分析 v2

> 分析日期: 2026-01-16
> 更新: 基于 5 人总配置 + 90%+ AI 代码生成率重新评估

## 核心约束

```
总人数: 5 人（含 Lead，Lead 也做具体开发工作）
AI 代码生成率目标: 90%+
现有代码: 成熟稳定，维护工作量低
新组件: afsd, afs-cli 是主要开发工作量
```

**工作模式**：
- 每个 Repo: 1 主 + 1 备 + AI
- Lead 同时承担具体开发任务
- AI 作为主要代码生产力

---

## Repo 体系概览

```
┌─────────────────────────────────────────────────────────┐
│  AINE Platform (闭源)                                   │
│  - 完整工程平台                                          │
│  - 最高层，依赖下层所有                                   │
└─────────────────────────────────────────────────────────┘
          ↓ 依赖
┌─────────────────────────────────────────────────────────┐
│  AIGNE (开源 framework + 闭源 runtime/observability)    │
│  - Agent 编排框架                                       │
│  - 多模型支持                                           │
│  - 工作流模式                                           │
└─────────────────────────────────────────────────────────┘
          ↓ 依赖
┌─────────────────────────────────────────────────────────┐
│  AFS (开源 core/daemon/cli + 闭源 runtime)              │
│  - 世界接口                                             │
│  - 最底层，无上层依赖                                    │
└─────────────────────────────────────────────────────────┘
```

---

## 工作量重新评估

### 关键洞察

**代码行数 ≠ 工作量**

| 组件 | 代码量 | 成熟度 | 实际工作量 |
|------|--------|--------|-----------|
| AFS core | ~800 行 | 高 | 🟢 低（维护） |
| AFS drivers | ~3,000 行 | 中 | 🟢 低（偶尔新增） |
| AIGNE core | ~15,000 行 | 中 | 🟡 中（稳定迭代） |
| AIGNE models | ~6,000 行 | 中 | 🟡 中（新增模型） |
| observability | ~8,500 行 | 中 | 🟢 低（维护） |
| **afsd (新)** | 预估 2,000 行 | 新 | 🔴 **高** |
| **afs-cli (新)** | 预估 1,500 行 | 新 | 🔴 **高** |
| AFS runtime (新) | 预估 3,000 行 | 新 | 🔴 **高** |
| AINE platform | 20,000+ 行 | 低 | 🔴 高（产品迭代） |

### 近期工作重心

```
🔴 高优先级（主要工作量）:
├── afsd 设计与实现
├── afs-cli 设计与实现
├── AFS runtime（闭源增强）
└── AINE 产品迭代

🟡 中优先级（持续维护）:
├── AIGNE 新模型接入
├── Agent Library 扩展
└── 跨 repo 同步机制

🟢 低优先级（稳定维护）:
├── AFS core（接口稳定）
├── AIGNE core（成熟）
└── Observability（功能完整）
```

---

## 5 人配置方案 ⭐

### 人员角色

```
┌─────────────────────────────────────────────────────────┐
│  Robert (Lead 1)                                        │
│  ├── 主责: AFS 架构设计 + afsd/afs-cli 核心实现         │
│  ├── 兼顾: 全局技术方向、跨 repo 协调                   │
│  └── 备份: AIGNE core                                   │
├─────────────────────────────────────────────────────────┤
│  DevLead (Lead 2)                                       │
│  ├── 主责: AIGNE 架构 + AINE 产品方向                   │
│  ├── 兼顾: 闭源组件规划                                 │
│  └── 备份: AFS                                          │
├─────────────────────────────────────────────────────────┤
│  Dev A                                                  │
│  ├── 主责: AIGNE framework + models                     │
│  └── 备份: AFS (drivers, cli)                           │
├─────────────────────────────────────────────────────────┤
│  Dev B                                                  │
│  ├── 主责: AINE platform 开发                           │
│  └── 备份: AIGNE agent-library                          │
├─────────────────────────────────────────────────────────┤
│  Dev C                                                  │
│  ├── 主责: 闭源组件 (AFS runtime, observability)        │
│  └── 备份: AINE                                         │
└─────────────────────────────────────────────────────────┘
```

### 职责矩阵

| 组件 | 主责 | 备份 | 工作量 |
|------|------|------|--------|
| AFS core | Robert | DevLead | 低 |
| afsd (新) | Robert | DevLead | **高** |
| afs-cli (新) | Robert | Dev A | **高** |
| AFS drivers | Dev A | Robert | 低 |
| AFS runtime | Dev C | Robert | 高 |
| AIGNE core | DevLead | Dev A | 中 |
| AIGNE models | Dev A | DevLead | 中 |
| AIGNE runtime | Dev C | DevLead | 中 |
| observability | Dev C | DevLead | 低 |
| AINE platform | Dev B | Dev C | 高 |

---

## AI 协作模式 (90%+ 代码生成)

### 人类 vs AI 分工

```
人类 (10% 代码):
├── 架构设计与决策
├── API 契约定义
├── 复杂算法核心逻辑
├── Code Review（关键路径）
└── 跨系统集成点

AI (90% 代码):
├── 功能实现代码
├── 测试代码（几乎 100%）
├── 文档生成
├── 重构执行
├── Bug 修复执行
└── 样板代码 / CRUD
```

### AI 放大系数（90%+ 场景）

| 任务类型 | 传统耗时 | AI 辅助耗时 | 放大系数 |
|---------|---------|------------|----------|
| 新功能实现 | 8h | 1h | **8x** |
| 测试编写 | 4h | 0.3h | **13x** |
| 重构 | 6h | 0.5h | **12x** |
| Bug 修复 | 2h | 0.3h | **7x** |
| 文档 | 2h | 0.2h | **10x** |
| 新模型接入 | 4h | 0.5h | **8x** |

**平均放大系数**: 10x（90% AI 代码生成场景）

### 实际人效

```
5 人 × 10x AI 放大 = 50 人效当量

对比传统团队:
- 50 人效当量 ≈ 传统 50 人团队产出
- 但决策质量更高（5人更容易对齐）
- 架构一致性更好（单点决策）
```

---

## 工作分配（按阶段）

### Phase 1: Repo 重组 + AFS 核心 (Week 1-4)

| 人员 | 主要任务 | 占比 |
|------|---------|------|
| Robert | afsd 设计与核心实现 | 80% |
| DevLead | Repo 重组执行、AIGNE 稳定 | 60% |
| Dev A | AFS 依赖清理、AIGNE 维护 | 70% |
| Dev B | AINE 产品迭代 | 90% |
| Dev C | 同步脚本、CI/CD 配置 | 80% |

### Phase 2: AFS 完整 + AIGNE 稳定 (Week 5-8)

| 人员 | 主要任务 | 占比 |
|------|---------|------|
| Robert | afs-cli 实现、afsd 完善 | 80% |
| DevLead | AIGNE runtime 闭源规划 | 60% |
| Dev A | AIGNE 新模型、agent library | 80% |
| Dev B | AINE 产品迭代 | 90% |
| Dev C | AFS runtime 实现 | 80% |

### Phase 3: 稳定运营 (Week 9+)

| 人员 | 主要任务 | 占比 |
|------|---------|------|
| Robert | 架构演进、疑难问题 | 50% |
| DevLead | 产品方向、技术债务 | 50% |
| Dev A | AIGNE 迭代 | 80% |
| Dev B | AINE 迭代 | 80% |
| Dev C | 闭源组件维护 | 70% |

---

## Repo 简化建议

### 基于 5 人配置的 Repo 策略

**原则**: 人少 → repo 少 → 切换成本低

```
推荐结构 (3 个主 repo):

1. arcblock-ai (私有主 repo)
   ├── afs/          # AFS 全部
   │   ├── core/
   │   ├── drivers/
   │   ├── daemon/
   │   ├── cli/
   │   └── runtime/
   └── aigne/        # AIGNE 全部
       ├── framework/
       ├── runtime/
       └── observability/

2. afs (公开 artifact)
   └── 同步自 arcblock-ai/afs (不含 runtime)

3. aigne-framework (公开 artifact)
   └── 同步自 arcblock-ai/aigne/framework

4. aine (独立私有 repo，已存在)
```

**优势**:
- 开发在一个 repo，减少切换
- 公开 repo 纯 artifact，无开发活动
- 5 人容易在单 repo 协调

### 替代方案: 完全分离

如果未来团队扩大到 8+ 人，可考虑：
- AFS 独立 repo（2 人）
- AIGNE 独立 repo（3 人）
- AINE 独立 repo（3 人）

---

## 风险与缓解

### 风险 1: Lead 工作过载

**问题**: Lead 既要架构又要具体开发
**缓解**:
- 优先用 AI 处理实现细节
- 关键决策文档化，减少重复沟通
- 异步 review 为主，减少会议

### 风险 2: 单点故障

**问题**: 每个领域只有 1-2 人了解
**缓解**:
- 所有设计决策写入 planning/
- 代码必须有 AI 可理解的注释
- 备份人员每周 review 关键 PR

### 风险 3: AI 代码质量

**问题**: 90% AI 代码可能有隐藏问题
**缓解**:
- 强制测试覆盖率（80%+）
- 人工 review 所有 PR（AI 辅助）
- 渐进式发布，不一次性大改
- 关键路径代码人工编写

---

## 协作节奏

### 日常（异步为主）

```
每日:
├── 各自在负责领域工作
├── AI 生成代码 + PR
├── 异步 code review
└── Slack 同步阻塞问题
```

### 周度

```
每周:
├── 30min 全员 sync（视频）
├── 重要 PR 集中 review
└── 下周优先级对齐
```

### 月度

```
每月:
├── 回顾 + 调整分工
├── 技术债务清理窗口
└── 架构演进讨论
```

---

## 总结

### 5 人配置

```
Robert:    AFS 架构 + afsd/cli 主力 + 全局
DevLead:   AIGNE/AINE 架构 + 产品方向 + 闭源规划
Dev A:     AIGNE framework + models
Dev B:     AINE platform
Dev C:     闭源组件 (runtime, observability)
```

### 核心原则

1. **AI 是主力生产者**: 90%+ 代码由 AI 生成
2. **人类是决策者**: 架构、API、关键逻辑人工把控
3. **单 repo 开发**: 减少上下文切换
4. **公开 repo 是 artifact**: 发版时同步，不在上面开发
5. **文档即协调**: 决策写入 planning/，减少口头沟通

### 产出预期

```
5 人 × 10x AI = 50 人效当量

Q1 目标:
- [ ] Repo 重组完成
- [ ] afsd v1.0 发布
- [ ] afs-cli v1.0 发布
- [ ] 同步机制运行
- [ ] AINE 产品迭代 2-3 个版本
```
